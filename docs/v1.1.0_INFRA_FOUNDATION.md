# ğŸ“¦ Release Notes: v0.12.0 - Infraestrutura e MigraÃ§Ã£o PostgreSQL

**Data:** 04/02/2026
**Sprint de Origem:** Sprint 12
**ResponsÃ¡vel:** Matheus & Mark

---

## ğŸ“ Resumo Executivo
Esta versÃ£o marca a **mudanÃ§a estrutural do banco de dados**, migrando do SQLite (desenvolvimento local) para **PostgreSQL** rodando em container Docker. Introduzimos tambÃ©m o **Alembic** para gerenciamento profissional de schema (Migrations) e preparamos o backend para o mÃ³dulo de GestÃ£o de CertidÃµes.

> **âš ï¸ AtenÃ§Ã£o:** Esta atualizaÃ§Ã£o requer passos manuais de infraestrutura (Docker) para funcionar. O banco de dados antigo (SQLite) foi descontinuado para persistÃªncia de dados.

## âœ¨ Changelog

### ğŸš€ Novas Funcionalidades (Feat)
* **[Infra]** ImplementaÃ§Ã£o de container **PostgreSQL 15** via Docker Compose (Porta mapeada: `5433`).
* **[Backend]** IntegraÃ§Ã£o do **Alembic** para controle de versÃ£o do banco de dados.
* **[Backend]** CriaÃ§Ã£o da entidade `Certificate` (CertidÃµes) e relacionamentos com `Document`.
* **[Scripts]** Novo script de criaÃ§Ã£o de Admin compatÃ­vel com Postgres (`create_first_admin.py`).

### ğŸ—ï¸ Melhorias TÃ©cnicas (Refactor)
* **[Database]** RefatoraÃ§Ã£o do `database.py` para suportar conexÃ£o hÃ­brida (Env Var ou Docker Local).
* **[Core]** CentralizaÃ§Ã£o da funÃ§Ã£o `generate_uuid` para evitar cÃ³digo duplicado nos Models.
* **[Security]** ImplementaÃ§Ã£o de fallback de conexÃ£o (Hardcode temporÃ¡rio) para contornar problemas de encoding (`0xe7`) em ambientes Windows.

---

## ğŸ”§ Detalhes TÃ©cnicos CrÃ­ticos (Para Devs)
Se vocÃª baixou esta versÃ£o agora, **o sistema NÃƒO vai rodar apenas com `npm run dev`**. Siga os passos:

1.  **DependÃªncias Python:**
    ```bash
    pip install alembic psycopg2-binary
    ```
2.  **Infraestrutura (Docker):**
    ```bash
    docker-compose up -d
    # O banco subirÃ¡ na porta localhost:5433
    ```
3.  **Banco de Dados (Migrations):**
    ```bash
    alembic upgrade head
    # Isso cria as tabelas users, companies, documents e certificates
    ```
4.  **Admin Inicial:**
    ```bash
    python -m app.scripts.create_first_admin
    ```

### ğŸ› Known Issues (Problemas Conhecidos)
* **ConexÃ£o Windows:** Em alguns terminais Windows, a leitura do arquivo `.env` falha devido a codificaÃ§Ã£o (cp1252).
    * *Workaround:* O arquivo `database.py` possui a URL do banco hardcoded como fallback. **NÃ£o use esta versÃ£o em produÃ§Ã£o pÃºblica sem corrigir isso.** (Ver `docs/DividasTecnicas.md`).