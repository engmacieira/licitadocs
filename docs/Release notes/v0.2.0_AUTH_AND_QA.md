# üì¶ Log de Atualiza√ß√£o: Autentica√ß√£o JWT e Blindagem (QA)

**Data:** 17/01/2026
**Vers√£o:** v0.2.0
**M√≥dulo Afetado:** Core / Auth / QA
**Arquivos Principais:**
* `app/routers/auth_router.py`
* `app/core/security.py`
* `app/tests/*` (conftest.py, test_auth.py, test_login.py)
* `requirements.txt`

## üìù Resumo da Mudan√ßa
Implementa√ß√£o completa do fluxo de **Login (Autentica√ß√£o)** utilizando tokens **JWT** (JSON Web Tokens) e ado√ß√£o do padr√£o **OAuth2**.
Al√©m disso, foi estabelecida a cultura de **QA (Quality Assurance)** com a cria√ß√£o de uma su√≠te de testes automatizados que cobrem os cen√°rios de cadastro e login (caminhos felizes e exce√ß√µes).
Tamb√©m foram realizadas corre√ß√µes de estabilidade nas depend√™ncias (downgrade estrat√©gico do Bcrypt).

## üîß Detalhes T√©cnicos (Para a IA)
* **Autentica√ß√£o:** Implementa√ß√£o da rota `POST /auth/login` recebendo `OAuth2PasswordRequestForm`. Gera√ß√£o de tokens com validade definida (30min) via biblioteca `python-jose`.
* **Seguran√ßa:** O endpoint de login exige credenciais v√°lidas e retorna um `Bearer Token`.
* **Testes (TDD):** Configura√ß√£o do ambiente de testes com banco em mem√≥ria (SQLite Memory) e `TestClient`. Cobertura de testes para:
    * Sucesso no cadastro e login.
    * Valida√ß√£o de senha curta/longa.
    * Tratamento de credenciais inv√°lidas.
* **Fixes (Estabilidade):**
    * Downgrade do `bcrypt` para `4.0.1` (compatibilidade com `passlib`).
    * Atualiza√ß√£o dos Schemas Pydantic para sintaxe V2 (`ConfigDict`).
    * Corre√ß√£o de DeprecationWarning do Status HTTP 422.

## ‚ö†Ô∏è Pontos de Aten√ß√£o
* A `SECRET_KEY` usada para assinar os tokens ainda est√° com valor default no c√≥digo. **Prioridade para Sprint 2:** Migrar para vari√°veis de ambiente (`.env`) antes de qualquer deploy.
* O fluxo de Login espera os dados como `Form-Data` (padr√£o OAuth2), e n√£o JSON. O Frontend deve estar ciente disso.

## üíª Comando de Commit Sugerido
```bash
git add docs/v0.2.0_AUTH_AND_QA.md
git commit -m "docs: adiciona log de vers√£o v0.2.0 (Auth JWT e Testes)"