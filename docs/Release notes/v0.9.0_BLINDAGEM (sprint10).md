# üì¶ Vers√£o v0.9.0: Blindagem, QA & Clean Architecture

**Data:** 02/02/2026
**Tag:** `v0.9.0`
**Codinome:** The Shield Update

## üéØ Vis√£o Geral
Esta vers√£o marca a matura√ß√£o t√©cnica do **LicitaDoc**. Focamos 100% em **refatora√ß√£o, seguran√ßa e documenta√ß√£o**, eliminando d√©bitos t√©cnicos cr√≠ticos antes de avan√ßar para o polimento visual. O Backend agora segue Clean Architecture estrita e o Frontend est√° desacoplado da API direta.

---

## üõ°Ô∏è Principais Mudan√ßas (Changelog)

### üêç Backend (Blindagem & Padr√µes)
* **Schemas Inteligentes (Pydantic v2):** Implementa√ß√£o de `populate_by_name=True` e Aliases. O Python trabalha com `snake_case` (ex: `is_active`) enquanto aceita e entrega `camelCase` (ex: `isActive`) para o Frontend, sem quebrar contratos.
* **Documenta√ß√£o Swagger:** Todos os Routers (`/auth`, `/admin`, `/documents`, `/ai`) agora possuem metadados ricos (`summary`, `description`), transformando o `/docs` em um manual de uso real.
* **Arquitetura de IA:** Cria√ß√£o do `AIService`. A l√≥gica de prompt e contexto foi removida do Router e isolada em um servi√ßo test√°vel e independente.
* **Core Hardening:**
    * `security.py`: Adicionado aviso de seguran√ßa no console caso a `SECRET_KEY` seja a padr√£o.
    * `database.py` e `storage.py`: Limpeza de c√≥digo e melhoria na gest√£o de conex√µes.

### ‚öõÔ∏è Frontend (Service Layer)
* **Centraliza√ß√£o do Axios:** Cria√ß√£o do `src/services/api.ts` com **Interceptors**. O Token JWT agora √© injetado automaticamente em todas as requisi√ß√µes, eliminando repeti√ß√£o de c√≥digo.
* **Services Tipados:** L√≥gica de neg√≥cio movida dos componentes para servi√ßos dedicados:
    * `documentService.ts`: Gerencia upload com `FormData` e listagem.
    * `aiService.ts`: Abstrai a comunica√ß√£o com o Chatbot.

### üß™ Qualidade (QA)
* **Testes Automatizados:** Backend com **100% de aprova√ß√£o** no Pytest (ap√≥s corre√ß√£o de depend√™ncia circular `User <-> Company` e encoding do Windows).
* **Tratamento de Erros:** Reposit√≥rios agora implementam `try/except/rollback` para garantir a integridade do banco em falhas de transa√ß√£o.

---

## üîß Detalhes T√©cnicos Cr√≠ticos (Para Devs)

* **Migration Necess√°ria?** N√£o estrutural, mas recomenda-se rodar `create_all` (dev) ou garantir que o banco esteja limpo devido √†s mudan√ßas nas constraints de Foreign Key.
* **Vari√°veis de Ambiente:** Verifique se `GOOGLE_API_KEY` est√° ativa para o funcionamento do `AIService`.
* **Frontend Build:** Certifique-se de que a vari√°vel `VITE_API_URL` esteja apontando para o backend correto (default: `http://127.0.0.1:8000`).

---

## ‚ö†Ô∏è Notas de Manuten√ß√£o
* **Seguran√ßa:** O sistema agora emite um alerta expl√≠cito se rodar com a `SECRET_KEY` default. Para produ√ß√£o, a configura√ß√£o via `.env` √© obrigat√≥ria.
* **Legado:** O arquivo `app/core/catalog.py` foi depreciado e removido em favor do `DocumentRepository`.