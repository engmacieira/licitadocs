# ğŸ“¦ VersÃ£o v0.9.0: Blindagem, QA & DevOps

**Data:** 02/02/2026  
**Tag:** `v0.9.0`  
**Codinome:** The Shield Update

## ğŸ¯ VisÃ£o Geral
Esta versÃ£o foca na estabilidade tÃ©cnica, confiabilidade dos dados e automaÃ§Ã£o de processos. Implementamos uma cobertura de testes robusta no Backend e preparamos o terreno para testes no Frontend, garantindo que novas funcionalidades nÃ£o quebrem o que jÃ¡ foi construÃ­do.

---

## ğŸ›¡ï¸ Qualidade e Testes (QA)

### ğŸ Backend (Pytest)
* **Cobertura de CÃ³digo:** AlcanÃ§amos **86% de cobertura** total no diretÃ³rio `app`.
* **CorreÃ§Ãµes CrÃ­ticas de Modelagem:** * SincronizaÃ§Ã£o do campo de senha no modelo `User` para `password_hash`.
    * PadronizaÃ§Ã£o do parÃ¢metro `uploaded_by_id` no `DocumentRepository` para permitir auditoria de uploads.
* **Blindagem de Rotas:** * Testes de integraÃ§Ã£o para o Agente Concierge (IA) com respostas mockadas.
    * ValidaÃ§Ã£o do isolamento de documentos (Multi-tenancy) e regras de permissÃ£o para Admins.
* **Bypass de AutenticaÃ§Ã£o:** ImplementaÃ§Ã£o de `dependency_overrides` para testes mais rÃ¡pidos e isolados.

### âš›ï¸ Frontend (Vitest)
* **Novo Ambiente:** ConfiguraÃ§Ã£o do **Vitest** com `jsdom` para simulaÃ§Ã£o de ambiente de navegador.
* **Garantia de Tipagem:** CorreÃ§Ã£o de erros estritos do TypeScript no componente `StatsCard`, garantindo que tendÃªncias visuais (up/down) sigam o contrato definido.

---

## ğŸš€ DevOps & AutomaÃ§Ã£o

### ğŸ¤– CI/CD (GitHub Actions)
* **Workflow de IntegraÃ§Ã£o ContÃ­nua:** Criada a pipeline `ci.yml` que executa automaticamente:
    1. InstalaÃ§Ã£o de dependÃªncias (Python/Node).
    2. Testes de Backend com relatÃ³rio de cobertura.
    3. Testes de Frontend (Build e UnitÃ¡rios).
* **GestÃ£o de Segredos:** ConfiguraÃ§Ã£o do suporte para `GOOGLE_API_KEY` via GitHub Secrets, protegendo chaves sensÃ­veis durante o processo de build.

---

## âš™ï¸ MudanÃ§as TÃ©cnicas Detalhadas

* **`user_model.py`:** Ajustada nomenclatura de campos para compatibilidade com o sistema de autenticaÃ§Ã£o legado e novos testes.
* **`document_repository.py`:** Atualizada a assinatura do mÃ©todo `create` para incluir `uploaded_by_id`, permitindo rastrear qual Admin ou Cliente enviou o arquivo.
* **`vite.config.ts`:** Expandido para suportar o ambiente de testes sem quebrar o proxy de desenvolvimento e o plugin do Tailwind CSS.

---

## âš ï¸ Notas de ManutenÃ§Ã£o
* **Database:** Como a estrutura de `uploaded_by_id` e `password_hash` foi estabilizada, recomenda-se um novo reset do banco local (`licita_doc.db`) caso ocorram erros de integridade.
* **Ambiente:** Certifique-se de rodar `npm install` na pasta `frontend` para baixar o Vitest e suas dependÃªncias.